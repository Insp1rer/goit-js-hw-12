{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/misc.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com/api/',\n});\n\nexport async function getImages(image, imagesLimitPerPage, currentPage) {\n  const params = {\n    key: '43252696-8c48e7f381a0da5ec3ef140c1',\n    q: image,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: imagesLimitPerPage,\n    page: currentPage,\n  };\n\n  const res = await axios.get('', { params });\n  return res;\n}\n","//------------------------------------------------------------------------------------------\\\\\n\nexport const refs = {\n  form: document.querySelector('.overall-form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loaderButton: document.querySelector('.load-button'),\n};\n\n//------------------------------------------------------------------------------------------\\\\\n\nexport function showLoadMoreButton() {\n  refs.loaderButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  refs.loaderButton.classList.add('hidden');\n}\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\n//------------------------------------------------------------------------------------------\\\\\n\nexport function smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const height = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: 2 * height,\n    behavior: 'smooth',\n  });\n}\n","//-------------------------------------------IMPORTS-------------------------------------------\\\\\nimport { refs } from './misc';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n//-------------------------------------------MARKUP-------------------------------------------\\\\\n\nexport function render(arrOfImages) {\n  const renderImages = arrOfImages\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"open-large-image\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\">\n              <p>Likes</p>\n              <span class=\"info-item-details\">${likes}</span>\n            </li>\n            <li class=\"info-item\">\n              <p>Views</p>\n              <span class=\"info-item-details\">${views}</span>\n            </li>\n            <li class=\"info-item\">\n              <p>Downloads</p>\n              <span class=\"info-item-details\">${downloads}</span>\n            </li>\n            <li class=\"info-item\">\n              <p>Comments</p>\n              <span class=\"info-item-details\">${comments}</span>\n            </li>\n          </ul>\n        </li>\n      `\n    )\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', renderImages);\n\n  //-------------------------------------------SIMPLELIGHTBOX-------------------------------------------\\\\\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    className: 'simple-lightbox',\n    captionsData: 'alt',\n    captionDelay: 250,\n    animationSpeed: 400,\n    overlayOpacity: 0.5,\n  });\n\n  lightbox.refresh();\n\n  //-------------------------------------------------------------------------------------------\\\\\n}\n","//-------------------------------------------IMPORTS-------------------------------------------\\\\\n\nimport { getImages } from './js/pixabay-api';\nimport { render } from './js/render-functions';\nimport {\n  refs,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showLoader,\n  hideLoader,\n  smoothScroll,\n} from './js/misc';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n//---------------------------------------------------------------------------------------------\\\\\n\nlet imagesLimitPerPage = 12;\nlet currentPage = 0;\n// let overallPages = 0;\nlet userInput;\n\nhideLoader();\n\nrefs.form.addEventListener('submit', handleImageSearch);\nrefs.loaderButton.addEventListener('click', handleLoadMore);\n\n//-----------------------------------------------------------------------------------------------\\\\\n\nasync function handleImageSearch(e) {\n  e.preventDefault();\n  currentPage = 1;\n  refs.gallery.innerHTML = '';\n  showLoader();\n  userInput = e.currentTarget.elements.searchImg.value.trim();\n\n  if (userInput.length === 0) {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Пусте поле, генеруємо випадкові зображення...',\n    });\n    hideLoader();\n    hideLoadMoreButton();\n    //return;\n  }\n\n  e.currentTarget.reset();\n\n  //------------------------------------------------------------------------------------------\\\\\n\n  try {\n    const imagedata = await getImages(\n      userInput,\n      imagesLimitPerPage,\n      currentPage\n    );\n\n    if (!imagedata.data.hits.length) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Error',\n        message: 'По вашому запиту нічого не знайдено',\n      });\n      hideLoader();\n      hideLoadMoreButton();\n      //return;\n    }\n    render(imagedata.data.hits);\n    //overallPages = Math.ceil(imagedata.totalHits / imagesLimitPerPage);\n    hideLoader();\n    if (imagedata.data.hits.length < imagesLimitPerPage) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Невідома помилка',\n    });\n  }\n}\n\n//------------------------------------------------------------------------------------------\\\\\n\nasync function handleLoadMore() {\n  currentPage += 1;\n  showLoader();\n  try {\n    const imagedata = await getImages(\n      userInput,\n      imagesLimitPerPage,\n      currentPage\n    );\n    render(imagedata.data.hits);\n    //overallPages = Math.ceil(imagedata.totalHits / imagesLimitPerPage);\n    hideLoader();\n    smoothScroll();\n    if (imagedata.data.hits.length < imagesLimitPerPage) {\n      hideLoadMoreButton();\n      iziToast.warning({\n        position: 'topRight',\n        message: 'Кінець колекції зображень',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Невідома помилка',\n    });\n  }\n}\n"],"names":["axios","Axios","getImages","image","imagesLimitPerPage","currentPage","params","refs","showLoadMoreButton","hideLoadMoreButton","showLoader","hideLoader","smoothScroll","height","render","arrOfImages","renderImages","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","userInput","handleImageSearch","handleLoadMore","e","iziToast","imagedata"],"mappings":"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"}